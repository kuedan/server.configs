// ==================================================================
// aliases.cfg: Set up for voting and general game mode configuration
// Scripted by: Samual, Naryl, atheros, Unknown[NF]
// Last updated: Sunday, August 25th - 25/8/2011
// ==================================================================

alias check_aev_${_allow_extra_votes} "set _allow_extra_votes 1";
    check_aev_${_allow_extra_votes}
alias check_di_${_done_initializing} "set _done_initializing 1";
    check_di_${_done_initializing}

alias add_extra_vote_1 "addvote $*"
alias add_extra_vote_0 ""
alias add_extra_vote "add_extra_vote_${_allow_extra_votes} $*"

alias do_endmatch_1 "endmatch"
alias do_endmatch_0 "echo NOTE: Still initializing, not ending match"
alias do_endmatch "do_endmatch_${_done_initializing}"

alias do_restart_1 "restart"
alias do_restart_0 "echo NOTE: Still initializing, not restarting match"
alias do_restart "do_restart_${_done_initializing}"

alias defaultsettings "g_powerup_strength 1; 
                        _nomutators; 
                        g_pickup_respawntime_weapon 10; 
                        g_weapon_stay 0; 
                        teamplay_mode 4; 
                        fraglimit_override 0; 
                        timelimit_overtimes 2; 
                        timelimit_suddendeath 5; 
                        timelimit 20;
                        g_tourney 1; 
                        g_warmup 1; 
                        nobots; 
                        sv_autoscreenshot 1;"

// Used by naryl's pickup bot
set _pickup_gamemodes "duel dm ft tdm ctf ca assault ka nb dom kh rune arena lms ons"
set _pickup_options "${_server_location}" // Continent Shortform defined in meta.cfg

exec rules.cfg


// =========================
// Specific gametype options
// =========================
alias pickup-duel       "defaultsettings; 
                            duel-rules;"
alias pickup-dm         "defaultsettings; 
                            dm-rules"
alias pickup-ft         "defaultsettings; 
                            freezetag-rules"
alias pickup-tdm        "defaultsettings; 
                            tdm-rules"
alias pickup-ctf        "defaultsettings; 
                            ctf-rules"
alias pickup-ca         "defaultsettings; 
                            ca-rules"
alias pickup-assault    "defaultsettings; 
                            assault-rules"
alias pickup-ka         "defaultsettings; 
                            keepaway-rules"
alias pickup-nb         "defaultsettings; 
                            nexball-rules"
alias pickup-dom        "defaultsettings; 
                            domination-rules"
alias pickup-kh         "defaultsettings; 
                            keyhunt-rules"
alias pickup-rune       "defaultsettings; 
                            rune-rules"
alias pickup-arena      "defaultsettings; 
                            arena-rules"
alias pickup-lms        "defaultsettings; 
                            lms-rules"
alias pickup-ons        "defaultsettings; 
                            onslaught-rules"

// ===========================
// Public aliases and settings
// ===========================
alias dm                "defaultsettings;
                            dm-rules;
                            do_endmatch"
alias freezetag         "defaultsettings;
                            freezetag-rules;
                            do_endmatch"
alias tdm               "defaultsettings;
                            tdm-rules;
                            do_endmatch"
alias ctf               "defaultsettings;
                            ctf-rules;
                            do_endmatch"
alias ca                "defaultsettings;
                            ca-rules;
                            do_endmatch"
alias assault           "defaultsettings;
                            assault-rules;
                            do_endmatch"
alias keepaway          "defaultsettings;
                            keepaway-rules;
                            do_endmatch"
alias nexball           "defaultsettings;
                            nexball-rules;
                            do_endmatch"
alias domination        "defaultsettings;
                            domination-rules;
                            do_endmatch"
alias keyhunt           "defaultsettings;
                            keyhunt-rules;
                            do_endmatch"
alias rune              "defaultsettings;
                            rune-rules;
                            do_endmatch"
alias arena             "defaultsettings;
                            arena-rules;
                            do_endmatch"
alias lms               "defaultsettings;
                            lms-rules;
                            do_endmatch"
alias onslaught         "defaultsettings;
                            onslaught-rules;
                            do_endmatch"

alias as "assault"
alias dom "domination"
alias kh "keyhunt"
alias ons "onslaught"
alias ka "keepaway"
alias nb "nexball"

add_extra_vote "as dm tdm ctf ca freezetag assault keepaway ka nexball nb kh keyhunt dom domination rune arena lms ons onslaught"


// ===========================
// Pickup aliases and settings
// ===========================
alias duel 			"defaultsettings; pickup-duel; do_endmatch"
alias 1v1 "duel"; alias dm1v1 "duel"; alias 1v1dm "duel"; alias 1on1 "duel"; alias dm1on1 "duel"; alias 1on1dm "duel"
add_extra_vote "duel 1v1 dm1v1 1v1dm 1on1 dm1on1 1on1dm"

exec function-NvN-variants.cfg

add_alias_NvN ca
add_alias_NvN tdm
add_alias_NvN ctf
add_alias_NvN assault
add_alias_NvN ft
add_alias_NvN ons
add_alias_NvN nb
add_alias_NvN dom


// =============
// Miscellaneous 
// =============
alias _jetpack      "toggle g_jetpack; 
                        g_grappling_hook 0; 
                        g_start_weapon_hook -1"
alias _hook         "toggle g_grappling_hook; 
                        toggle g_start_weapon_hook \"0\" \"-1\"; 
                        g_jetpack 0"
alias _weaponarena  "toggle g_weaponarena \"most\" \"0\"; 
                        g_minstagib 0"
alias _minstagib    "toggle g_minstagib; 
                        g_weaponarena 0"
alias _infammo      "toggle g_use_ammunition"

alias jetpack           "_jetpack; do_restart"
alias hook              "_hook; do_restart"
alias weaponarena       "_weaponarena; do_restart"
alias hookarena         "_weaponarena; _hook; do_restart"
alias jetpackarena      "_weaponarena; _hook; do_restart"
alias minstagib         "_minstagib; _infammo; do_restart"
alias minstahook        "_minstagib; _infammo; _hook; do_restart"
alias minstajetpack     "_minstagib; _infammo; _jetpack; do_restart"
alias infammo           "_infammo; do_restart"

alias _nomutators "g_weaponarena 0; 
                        g_minstagib 0; 
                        g_use_ammunition 1; 
                        g_grappling_hook 0; 
                        g_start_weapon_hook -1; 
                        g_jetpack 0"
alias nomutators "_nomutators; do_restart"

add_extra_vote "jetpack hook weaponarena hookarena jetpackarena minstagib minstahook minstajetpack infammo nomutators"

alias warmup "toggle g_warmup; do_restart"
alias enablebots "minplayers 4"
alias nobots "minplayers 0; bot_number 0"

set _fullbright_model "models/player/megaerebus.iqm"

alias sv_fbskin_unique "sv_defaultcharacter 1; 
                            sv_defaultplayermodel ${_fullbright_model}; 
                            sv_defaultplayerskin 1; 
                            sv_defaultplayercolors \"\""
alias sv_fbskin_green "sv_defaultcharacter 1; 
                            sv_defaultplayermodel ${_fullbright_model}; 
                            sv_defaultplayerskin 1; 
                            sv_defaultplayercolors 51"
alias sv_fbskin_red "sv_defaultcharacter 1; 
                            sv_defaultplayermodel ${_fullbright_model};
                            sv_defaultplayerskin 1; 
                            sv_defaultplayercolors 68"
alias sv_fbskin_orange "sv_defaultcharacter 1; 
                            sv_defaultplayermodel ${_fullbright_model}; 
                            sv_defaultplayerskin 1; 
                            sv_defaultplayercolors 238"

add_extra_vote "teamplay_mode g_maxplayers timelimit enablebots nobots sv_fbskin_unique sv_fbskin_green sv_fbskin_orange sv_fbskin_red sv_fbskin_off warmup"
