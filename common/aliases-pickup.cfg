// ==================================================================
// aliases.cfg: Set up for voting and general game mode configuration
// Scripted by: Samual, Naryl, atheros, Unknown[NF]
// Last updated: Sunday, August 25th - 25/8/2011
// ==================================================================

alias check_aev_${_allow_extra_votes} "set _allow_extra_votes 1"; check_aev_${_allow_extra_votes} // Allow extra votes (like mutators, private matches, etc) to be added 
alias check_di_${_done_initializing} "set _done_initializing 1"; check_di_${_done_initializing} // used in server.cfg to allow selection of a game mode without 


alias add_extra_vote_1 "addvote $*"
alias add_extra_vote_0 ""
alias add_extra_vote "add_extra_vote_${_allow_extra_votes} $*"

add_extra_vote "tourneysettings publicsettings"

alias do_endmatch_1 "endmatch"
alias do_endmatch_0 "echo NOTE: Still initializing, not ending match"
alias do_endmatch "do_endmatch_${_done_initializing}"
alias do_restart_1 "restart"
alias do_restart_0 "echo NOTE: Still initializing, not restarting match"
alias do_restart "do_restart_${_done_initializing}"

alias defaultsettings "g_powerup_strength 1; _nomutators; g_pickup_respawntime_weapon 10; g_weapon_stay 0; sv_autoscreenshot 0;teamplay_mode 4"
alias tourneysettings "defaultsettings; fraglimit_override 0; timelimit_overtimes 2; g_tourney 1; g_warmup 1; nobots; sv_autoscreenshot 1" 
alias publicsettings "defaultsettings; fraglimit_override -1; timelimit_overtimes 0; g_tourney 0; g_warmup 0; enablebots; g_maxplayers 0"

set _pickup_gamemodes "duel dm ft tdm ctf ca assault ka nb dom kh rune arena lms ons"
set _pickup_options "EU"

exec rules.cfg


// =========================
// Specific gametype options
// =========================
alias pickup-duel               "dm-rules; g_powerup_strength 0"
alias pickup-dm                 "dm-rules"
alias pickup-ft                 "freezetag-rules"
alias pickup-tdm                "tdm-rules"
alias pickup-ctf                "ctf-rules"
alias pickup-ca                 "ca-rules"
alias pickup-assault            "as-rules"
alias pickup-ka                 "keepaway-rules"
alias pickup-nb                 "nexball-rules"
alias pickup-dom                "dom-rules"
alias pickup-kh                 "kh-rules"
alias pickup-rune               "rune-rules"
alias pickup-arena              "arena-rules"
alias pickup-lms                "lms-rules"
alias pickup-ons                "onslaught-rules"

// ===========================
// Public aliases and settings
// ===========================
alias dm                "publicsettings;        dm-rules;      do_endmatch"
alias freezetag         "publicsettings;        ft-rules;      do_endmatch"
alias tdm               "publicsettings;        tdm-rules;     do_endmatch"
alias ctf               "publicsettings;        ctf-rules;     do_endmatch"
alias ca                "publicsettings;        ca-rules;      do_endmatch"
alias assault           "publicsettings;        as-rules;      do_endmatch"
alias keepaway          "publicsettings;        ka-rules;      do_endmatch"
alias nexball           "publicsettings;        nb-rules;      do_endmatch"
alias domination        "publicsettings;        dom-rules;     do_endmatch"
alias keyhunt           "publicsettings;        kh-rules;      do_endmatch"
alias rune              "publicsettings;        rune-rules;    do_endmatch"
alias arena             "publicsettings;        arena-rules;   do_endmatch"
alias lms               "publicsettings;        lms-rules;     do_endmatch"
alias onslaught         "publicsettings;        ons-rules;     do_endmatch"

alias as "assault"
alias dom "domination"
alias kh "keyhunt"
alias ons "onslaught"
alias ka "keepaway"
alias nb "nexball"

add_extra_vote "as dm tdm ctf ca freezetag assault keepaway ka nexball nb kh keyhunt dom domination rune arena lms ons onslaught"


// ===========================
// Pickup aliases and settings
// ===========================
alias duel "tourneysettings; pickup-duel; g_maxplayers 2; do_endmatch"
alias 1v1 "duel"; alias dm1v1 "duel"; alias 1v1dm "duel"; alias 1on1 "duel"; alias dm1on1 "duel"; alias 1on1dm "duel"
add_extra_vote "duel 1v1 dm1v1 1v1dm 1on1 dm1on1 1on1dm"

alias add_alias_2v2_variant "alias ${1}2v2 \"2v2${1}\"; alias ${1}2on2 \"2v2${1}\"; alias 2on2${1} \"2v2${1}\""
alias add_alias_2v2 "alias 2v2${1} \"tourneysettings; pickup-${1}; g_maxplayers 4;   do_endmatch\"; add_alias_2v2_variant ${1}; add_extra_vote \"2v2${1} 2on2${1} ${1}2v2 ${1}2on2\""
alias add_alias_3v3_variant "alias ${1}3v3 \"3v3${1}\"; alias ${1}3on3 \"3v3${1}\"; alias 3on3${1} \"3v3${1}\""
alias add_alias_3v3 "alias 3v3${1} \"tourneysettings; pickup-${1}; g_maxplayers 6;   do_endmatch\"; add_alias_3v3_variant ${1}; add_extra_vote \"3v3${1} 3on3${1} ${1}3v3 ${1}3on3\""
alias add_alias_4v4_variant "alias ${1}4v4 \"4v4${1}\"; alias ${1}4on4 \"4v4${1}\"; alias 4on4${1} \"4v4${1}\""
alias add_alias_4v4 "alias 4v4${1} \"tourneysettings; pickup-${1}; g_maxplayers 8;   do_endmatch\"; add_alias_4v4_variant ${1}; add_extra_vote \"4v4${1} 4on4${1} ${1}4v4 ${1}4on4\""
alias add_alias_5v5_variant "alias ${1}5v5 \"5v5${1}\"; alias ${1}5on5 \"5v5${1}\"; alias 5on5${1} \"5v5${1}\""
alias add_alias_5v5 "alias 5v5${1} \"tourneysettings; pickup-${1}; g_maxplayers 10;  do_endmatch\"; add_alias_5v5_variant ${1}; add_extra_vote \"5v5${1} 5on5${1} ${1}5v5 ${1}5on5\""
alias add_alias_6v6_variant "alias ${1}6v6 \"6v6${1}\"; alias ${1}6on6 \"6v6${1}\"; alias 6on6${1} \"6v6${1}\""
alias add_alias_6v6 "alias 6v6${1} \"tourneysettings; pickup-${1}; g_maxplayers 12;  do_endmatch\"; add_alias_6v6_variant ${1}; add_extra_vote \"6v6${1} 6on6${1} ${1}6v6 ${1}6on6\""

alias add_alias_NvN "add_alias_2v2 $1; add_alias_3v3 $1; add_alias_4v4 $1; add_alias_5v5 $1; add_alias_6v6 $1"

add_alias_NvN ca
add_alias_NvN tdm
add_alias_NvN ctf
add_alias_NvN assault
add_alias_NvN ft
add_alias_NvN ons
add_alias_NvN nb
add_alias_NvN dom


// =============
// Miscellaneous 
// =============
alias _jetpack "toggle g_jetpack; g_grappling_hook 0; g_start_weapon_hook -1"
alias _hook "toggle g_grappling_hook; toggle g_start_weapon_hook \"0\" \"-1\"; g_jetpack 0"
alias _weaponarena "toggle g_weaponarena \"most\" \"0\"; g_minstagib 0"
alias _minstagib "toggle g_minstagib; g_weaponarena 0"
alias _infammo "toggle g_use_ammunition"

alias jetpack "_jetpack; do_restart"
alias hook "_hook; do_restart"
alias weaponarena "_weaponarena; do_restart"
alias hookarena "_weaponarena; _hook; do_restart"
alias jetpackarena "_weaponarena; _hook; do_restart"
alias minstagib "_minstagib; _infammo; do_restart"
alias minstahook "_minstagib; _infammo; _hook; do_restart"
alias minstajetpack "_minstagib; _infammo; _jetpack; do_restart"
alias infammo "_infammo; do_restart"

alias _nomutators "g_weaponarena 0; g_minstagib 0; g_use_ammunition 1; g_grappling_hook 0; g_start_weapon_hook -1; g_jetpack 0"
alias nomutators "_nomutators; do_restart"

add_extra_vote "jetpack hook weaponarena hookarena jetpackarena minstagib minstahook minstajetpack infammo nomutators"

alias warmup "toggle g_warmup; do_restart"
alias enablebots "minplayers 4"
alias nobots "minplayers 0; bot_number 0"

set _fullbright_model "models/player/megaerebus.iqm"

alias sv_fbskin_unique "sv_defaultcharacter 1; sv_defaultplayermodel ${_fullbright_model}; sv_defaultplayerskin 1; sv_defaultplayercolors \"\""
alias sv_fbskin_green "sv_defaultcharacter 1; sv_defaultplayermodel ${_fullbright_model}; sv_defaultplayerskin 1; sv_defaultplayercolors 51"
alias sv_fbskin_red "sv_defaultcharacter 1; sv_defaultplayermodel ${_fullbright_model}; sv_defaultplayerskin 1; sv_defaultplayercolors 68"
alias sv_fbskin_orange "sv_defaultcharacter 1; sv_defaultplayermodel ${_fullbright_model}; sv_defaultplayerskin 1; sv_defaultplayercolors 238"

add_extra_vote "teamplay_mode g_maxplayers timelimit enablebots nobots sv_fbskin_unique sv_fbskin_green sv_fbskin_orange sv_fbskin_red sv_fbskin_off warmup"
