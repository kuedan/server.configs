// =============================================
// alias definitions for server setup and voting
// =============================================

alias do_endmatch_1 "endmatch"
alias do_endmatch_0 "echo NOTE: Still initializing, not ending match"
alias do_endmatch "do_endmatch_${_done_initializing}"

alias do_restart_1 "restart"
alias do_restart_0 "echo NOTE: Still initializing, not restarting match"
alias do_restart "do_restart_${_done_initializing}"

// ==============
// gametype rules
// ==============

// default gameplay settings
alias defaultsettings "_nomutators; teamplay_mode 4; sv_fraginfo 1; g_powerups -1; fraglimit_override 30; fraglimit 30; timelimit_override 20; timelimit 20; timelimit_overtimes 2; timelimit_suddendeath 5; enablebots; g_maxplayers 0;"

// arena
alias arena-rules       "gametype arena;"
// assault
alias as-rules          "gametype as;"
// clan arena
alias ca-rules          "gametype ca;  teamplay_mode 1; g_powerups 0" // g_chat_nospectators 2
// capture the flag
alias ctf-rules         "gametype ctf;
// deathmatch
alias dm-rules          "gametype dm;"
// deathmatch duel
alias duel-rules        "gametype dm;  g_maxplayers 2; g_warmup 1; sv_fraginfo 1; g_powerups 0; timelimit_override 10; timelimit 10;"
// domination
alias dom-rules         "gametype dom;"
// freezetag
alias ft-rules          "gametype ft;"
// keepaway
alias ka-rules          "gametype ka;"
// keyhunt
alias kh-rules          "gametype kh;"
// last man standing
alias lms-rules         "gametype lms; teamplay_mode 1; g_powerups 0;"
// nexball
alias nb-rules          "gametype nexball;"
// onslaught
alias ons-rules         "gametype ons;"
// team deathmatch
alias tdm-rules         "gametype tdm;"
// rune
alias rune-rules        "gametype rune;"

// ============
// vote aliases
// ============

alias arena  "defaultsettings; arena-rules; do_endmatch"
alias as     "defaultsettings; as-rules;    do_endmatch"
alias ca     "defaultsettings; ca-rules;    do_endmatch"
alias ctf    "defaultsettings; ctf-rules;   do_endmatch"
alias dm     "defaultsettings; dm-rules;    do_endmatch"
alias duel   "defaultsettings; duel-rules;  do_endmatch"
alias dom    "defaultsettings; dom-rules;   do_endmatch"
alias ft     "defaultsettings; ft-rules;    do_endmatch"
alias ka     "defaultsettings; ka-rules;    do_endmatch"
alias kh     "defaultsettings; kh-rules;    do_endmatch"
alias kh4    "defaultsettings; kh-rules; g_keyhunt_teams_override 4; do_endmatch"
alias kh2    "defaultsettings; kh-rules; g_keyhunt_teams_override 2; do_endmatch"
alias lms    "defaultsettings; lms-rules;   do_endmatch"
alias nb     "defaultsettings; nb-rules;    do_endmatch"
alias ons    "defaultsettings; ons-rules;   do_endmatch"
alias rune   "defaultsettings; rune-rules;  do_endmatch"
alias tdm    "defaultsettings; tdm-rules;   do_endmatch"

alias addvote_gametypes "addvote \"arena as ca ctf dm duel dom ft ka kh lms nb ons rune tdm\""

// ===========================
// player limits for gametypes
// ===========================

alias add_alias_2v2 "alias 2v2${1} \"${1}; g_maxplayers 4;   do_endmatch\"; addvote 2v2${1}"
alias add_alias_3v3 "alias 3v3${1} \"${1}; g_maxplayers 6;   do_endmatch\"; addvote 3v3${1}"
alias add_alias_4v4 "alias 4v4${1} \"${1}; g_maxplayers 8;   do_endmatch\"; addvote 4v4${1}"
alias add_alias_5v5 "alias 5v5${1} \"${1}; g_maxplayers 10;  do_endmatch\"; addvote 5v5${1}"
alias add_alias_6v6 "alias 6v6${1} \"${1}; g_maxplayers 12;  do_endmatch\"; addvote 6v6${1}"

alias add_alias_NvN "add_alias_2v2 $1; add_alias_3v3 $1; add_alias_4v4 $1; add_alias_5v5 $1; add_alias_6v6 $1"

//add_alias_NvN as
//add_alias_NvN ca
//add_alias_NvN ctf
//add_alias_NvN dom
//add_alias_NvN ft
//add_alias_NvN nb
//add_alias_NvN ons
//add_alias_NvN tdm

// keyhunt specific
alias add_alias_kh_2v2  "alias 2v2kh2 \"kh2; g_maxplayers 6;  do_endmatch\"; addvote 2v2kh"
alias add_alias_kh_3v3  "alias 3v3kh2 \"kh2; g_maxplayers 9;  do_endmatch\"; addvote 3v3kh"
alias add_alias_kh_4v4  "alias 4v4kh2 \"kh2; g_maxplayers 12; do_endmatch\"; addvote 4v4kh"
alias add_alias_kh_NvN  "add_alias_kh_2v2; add_alias_kh_3v3; add_alias_kh_4v4"
alias add_alias_kh4_2v2 "alias 2v2kh4 \"kh4; g_maxplayers 8;  do_endmatch\"; addvote 2v2kh4"
alias add_alias_kh4_3v3 "alias 3v3kh4 \"kh4; g_maxplayers 12; do_endmatch\"; addvote 3v3kh4"
alias add_alias_kh4_NvN "add_alias_kh4_2v2; add_alias_kh4_3v3"

//add_alias_kh_NvN
//add_alias_NvN kh2
//add_alias_kh4_NvN

alias addvote_gametypes_player_limits "add_alias_NvN as; add_alias_NvN ca; add_alias_NvN ctf; add_alias_NvN dom; add_alias_NvN ft; add_alias_NvN nb; add_alias_NvN ons; add_alias_NvN tdm; add_alias_kh_NvN; add_alias_NvN kh2; add_alias_kh4_NvN"

// ========
// mutators
// ========

alias _info_message "set sv_adminnick_bak \"${sv_adminnick}\"; set sv_adminnick \"^1mutator info^3\"; say ${1} ^3enabled - to disable ${1} vote for nomutators or a gametype^7; set sv_adminnick \"${sv_adminnick_bak}\""

alias _hook         "toggle g_grappling_hook; g_jetpack 0; toggle g_start_weapon_hook \"0\" \"-1\""
alias _infammo      "toggle g_use_ammunition"
alias _jetpack      "toggle g_jetpack; g_grappling_hook 0; toggle g_start_weapon_hook \"0\" \"-1\""
alias _minstagib    "toggle g_minstagib"
alias _weaponarena  "toggle g_weaponarena \"most\" \"0\""

alias _nomutators "g_weaponarena 0; g_minstagib 0; g_use_ammunition 1; g_grappling_hook 0; g_start_weapon_hook -1; g_jetpack 0"
alias nomutators "_nomutators; do_restart"

alias hook             "_nomutators; _hook;                            do_restart; _info_message hook"
alias jetpack          "_nomutators; _jetpack;                         do_restart; _info_message jetpack"
alias weaponarena      "_nomutators; _weaponarena;                     do_restart; _info_message weaponarena"
alias hookarena        "_nomutators; _weaponarena; _hook;              do_restart; _info_message hookarena"
alias jetpackarena     "_nomutators; _weaponarena; _jetpack;           do_restart; _info_message jetpackarena"
alias minstagib        "_nomutators; _minstagib;                       do_restart; _info_message minstagib"
alias minstahook       "_nomutators; _minstagib; _hook;                do_restart; _info_message minstahook"
alias minstajetpack    "_nomutators; _minstagib; _jetpack;             do_restart; _info_message minstajetpack"
alias infammo          "_nomutators; _infammo;                         do_restart; _info_message infammo"

alias addvote_mutators "addvote \"hook hookarena jetpack jetpackarena minstagib minstahook minstajetpack weaponarena infammo nomutators\""

// ======
// others
// ======

alias warmup_toggle "toggle g_warmup; do_restart"
alias enablebots "minplayers 2"
alias nobots "minplayers 0"
alias fraginfo_disable "sv_fraginfo 1"
alias fraginfo_enable "sv_fraginfo 2"
alias spectatorchat_toggle "toggle g_chat_nospectators 0 2; do_restart"

// alias ca_enemyspec_toggle "toggle g_ca_spectate_enemies; do restart"
alias ca_enemyspec_enable  "g_ca_spectate_enemies 1; g_chat_nospectators 2; do_restart"
alias ca_enemyspec_disable "g_ca_spectate_enemies 0;                        do_restart"

alias addvote_others "addvote \"fraginfo_enable fraginfo_disable warmup_toggle spectatorchat_toggle ca_enemyspec_enable ca_enemyspec_disable enablebots nobots\""

// ==============
// model settings
// ==============

// !!! ATTENTION: !!!
// if you force a default model, then client cvars "cl_forceplayer..." are repealed

set _sv_defaultplayermodel "models/player/megaerebus.iqm"

alias fbskin_model_forcedefaults "sv_defaultcharacter 1; sv_defaultplayerskin 1; sv_defaultplayermodel $_sv_defaultplayermodel"
alias sv_fbskin_red     "fbskin_model_forcedefaults; sv_defaultplayercolors 68"
alias sv_fbskin_green   "fbskin_model_forcedefaults; sv_defaultplayercolors 51"
alias sv_fbskin_blue    "fbskin_model_forcedefaults; sv_defaultplayercolors 221"
alias sv_fbskin_yellow  "fbskin_model_forcedefaults; sv_defaultplayercolors 204"
alias sv_fbskin_orange  "fbskin_model_forcedefaults; sv_defaultplayercolors 238"
alias sv_fbskin_white   "fbskin_model_forcedefaults; sv_defaultplayercolors 00"
alias sv_fbskin_rainbow "fbskin_model_forcedefaults; sv_defaultplayercolors 47"
alias sv_fbskin_unique  "fbskin_model_forcedefaults; sv_defaultplayercolors \"\""

alias addvote_forceskins "addvote \"sv_fbskin_blue sv_fbskin_green sv_fbskin_orange sv_fbskin_red sv_fbskin_white sv_fbskin_yellow sv_fbskin_unique sv_fbskin_rainbow sv_fbskin_off\"" 

